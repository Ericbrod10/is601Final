{% extends "layout.html" %}
{% block content %}

<form action="/CheckIn" method="POST">
    {% if cookie %}
    <h2>You have already Checked-in to this location.</h2>


    <h4>Previous Check-in:</h4>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Reason</th>
            <th scope="col">Check-in Time</th>
        </tr>
        </thead>
        <tbody>
        {% for i in Logs %}
        <tr>
            <td>{{ i.FirstName }}</td>
            <td>{{ i.LastName }}</td>
            <td>{{ i.PhoneNumber }}</td>
            <td>{{ i.ReasonForVisit }}</td>
            <td>{{ i.CheckInTimeFormatted }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <div class = "center"><h4>To create a new check-in, please check-out first.</h4></div>
    <div class = "center"> <a role="button" class="btn btn-danger btn-lg" href="/CheckOut">Check-Out</a></div>
    {% else %}
    <h2>Please fill out the information below to check into the building.</h2>
    <div class="row">
        <div class="col">
            <label for="FirstName">First Name:</label>
            <input id="FirstName" type="text" class="form-control" placeholder="John"
                   name="FirstName" required>
        </div>
        <div class="col">
            <label for="LastName">Last Name:</label>
            <input id="LastName" type="text" class="form-control" placeholder="Doe"
                   name="LastName" required>
        </div>
        <div class="col">
            <label for="PhoneNumber">Phone Number:</label>
            <input id="PhoneNumber" type="tel" class="form-control" placeholder="Ex: 888-888-8888 or 8888888888" name="PhoneNumber"
                    pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}|[0-9]{10}|[0-9]{1}[0-9]{10}|[0-9]{1}-[0-9]{3}-[0-9]{3}-[0-9]{4}"
                    required>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <label for="Reason">Reason for Visit:</label>
            <input id="Reason" type="text" class="form-control" placeholder="Ex: Workday, Shopping, etc" name="Reason"
            required>
        </div>
    </div>
    <button type="submit" class="btn btn-success">Check In</button>
    {% endif %}

</form>

{% endblock %}